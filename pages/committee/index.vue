<template>
  <div class="q-pa-md">
    <div class="q-pa-md">
      <q-btn color="purple" label="+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£" @click="openDialog" />
    </div>

    <CommitteeListDataTable :rows="rows" @dataUpdated="handleDataUpdated" />

    <!-- Dialog ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
    <CommitteeDialog ref="dialogRef" @save="onDialogSave" />
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import CommitteeDialog from '~/components/committee/edit/dialog.vue' 
definePageMeta({ middleware: ["auth"] })

// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£
const rows = ref<any[]>([
  {
    committee_position: "‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
    create_date: "2024-09-01",
    committee_name: "‡∏Ñ‡∏∏‡∏ì‡∏ü‡πâ‡∏≤",
    order: 1,
  },
  {
    order: 2,
    committee_position: "‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
    create_date: "2024-09-01",
    committee_name: "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏≠‡∏ã‡πå",
  },
  {
    order: 3,
    committee_position: "‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
    create_date: "2024-09-01",
    committee_name: "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏≠‡∏ã‡πå",
  },
]);

// üéØ dialog ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏¥‡∏î
const dialogRef = ref();

const openDialog = () => {
  dialogRef.value.open();
};

// ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô dialog
const onDialogSave = (newItem: any) => {
  const nextOrder = rows.value.length + 1;
  rows.value = [
    ...rows.value,
    {
      ...newItem,
      order: nextOrder,
      create_date: new Date().toISOString().split("T")[0],
    }
  ];
};

// ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö reload ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï
const handleDataUpdated = () => {
  const newRows = [
    {
      committee_position: "‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
      create_date: "2024-09-01",
      committee_name: "‡∏ô‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤",
      order: 1,
    },
    {
      order: 2,
      committee_position: "‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
      create_date: "2024-09-01",
      committee_name: "‡∏ô‡πâ‡∏≠‡∏á‡πÑ‡∏≠‡∏ã‡πå",
    },
    {
      order: 3,
      committee_position: "‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
      create_date: "2024-09-01",
      committee_name: "‡∏ô‡πâ‡∏≠‡∏á‡πÑ‡∏≠‡∏ã‡πå",
    },
  ];
  rows.value = [...newRows];
};
</script>



<!-- <template>
    <div class="q-pa-md">
      <div class="q-pa-md">
        <q-btn color="purple" label="+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£"></q-btn>
    </div>
    
        <CommitteeListDataTable :rows="rows" @dataUpdated="handleDataUpdated" />
    </div>
</template>

<script setup lang="ts">
definePageMeta({
  middleware:["auth"],
})

const rows = ref<any>([]);

rows.value = [
  {
    committee_position: "‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
    create_date: "2024-09-01",
    committee_name: "‡∏ô‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤",
    order: 1,
  },
  {
    order: 2,
    committee_position: "‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
    create_date: "2024-09-01",
    committee_name: "‡∏ô‡πâ‡∏≠‡∏á‡πÑ‡∏≠‡∏ã‡πå",
   
  },
  {
    order: 3,
    committee_position: "‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
    create_date: "2024-09-01",
    committee_name: "‡∏ô‡πâ‡∏≠‡∏á‡πÑ‡∏≠‡∏ã‡πå",
   
  },
];

const handleDataUpdated = () => {
  
  const newRows = [
    {
      committee_position: "‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
      create_date: "2024-09-01",
      committee_name: "‡∏ô‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤",
      order: 1,
    },
    {
      order: 2,
      committee_position: "‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
      create_date: "2024-09-01",
      committee_name: "‡∏ô‡πâ‡∏≠‡∏á‡πÑ‡∏≠‡∏ã‡πå",
    },
    {
      order: 3,
      committee_position: "‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£",
      create_date: "2024-09-01",
      committee_name: "‡∏ô‡πâ‡∏≠‡∏á‡πÑ‡∏≠‡∏ã‡πå",
    },
  ];
  rows.value = [...newRows];
};


</script>

<style scoped>

</style> -->